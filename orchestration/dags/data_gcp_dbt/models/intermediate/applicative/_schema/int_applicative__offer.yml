version: 2

models:
  - name: int_applicative__offer
    description: >
      This intermediate dbt model aggregates and enriches offer-level data for
      the Pass Culture application. It combines information from multiple sources
      and intermediate tables to provide a comprehensive view of each offer, including
      its metadata, stock and booking statistics, favorites, categorization,
      and additional business logic.
    columns:
      - name: offer_id
        description: '{{ doc("column__offer_id") }}'
        data_tests:
          - relationships:
              to: ref('int_global__stock')
              field: offer_id
              where: "total_available_stock>0"
