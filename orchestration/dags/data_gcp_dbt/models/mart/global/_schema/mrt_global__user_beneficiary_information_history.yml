version: 2
models:
  - name: mrt_global__user_beneficiary_information_history
    description: '{{ doc("description__mrt_global__user_beneficiary_information_history") }}'
    columns:
      - name: user_id
        description: '{{ doc("column__user_id") }}'
        data_type: STRING
        data_tests:
          - not_null

      - name: user_information_rank
        description: '{{ doc("column__info_history_rank") }}'
        data_type: INT64
        data_tests:
          - not_null
          - dbt_utils.accepted_range:
              min_value: 0
              inclusive: true

      - name: user_information_action_type
        description: '{{ doc("column__user_action_type") }}'
        data_type: STRING
        data_tests:
          - not_null
          - accepted_values:
              values: ['INFO_MODIFIED', 'PROFILE_COMPLETION']

      - name: user_information_created_at
        description: Timestamp when the user information was modified (partitioning key with daily granularity)
        data_type: TIMESTAMP
        data_tests:
          - not_null

      - name: user_activity
        description: '{{ doc("column__user_activity") }}'
        data_type: STRING

      - name: user_previous_activity
        description: '{{ doc("column__user_previous_activity") }}'
        data_type: STRING

      - name: user_age_at_information_creation
        description: '{{ doc("column__user_age_at_info_creation") }}'
        data_type: INT64

      - name: user_has_confirmed_information
        description: '{{ doc("column__has_confirmed") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_has_modified_information
        description: '{{ doc("column__has_modified") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_has_modified_activity
        description: '{{ doc("column__has_modified_activity") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_has_modified_address
        description: '{{ doc("column__has_modified_address") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_has_modified_city
        description: '{{ doc("column__has_modified_city") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_has_modified_postal_code
        description: '{{ doc("column__has_modified_postal_code") }}'
        data_type: BOOL
        data_tests:
          - not_null

      - name: user_epci_code
        description: '{{ doc("column__user_epci_code") }}'
        data_type: STRING

      - name: user_iris_internal_id
        description: '{{ doc("column__user_iris_internal_id") }}'
        data_type: STRING

      - name: user_region_name
        description: '{{ doc("column__user_region_name") }}'
        data_type: STRING

      - name: user_department_name
        description: '{{ doc("column__user_department_name") }}'
        data_type: STRING

      - name: user_density_label
        description: '{{ doc("column__user_density_label") }}'
        data_type: STRING

      - name: user_density_macro_level
        description: '{{ doc("column__user_density_macro_level") }}'
        data_type: STRING

      - name: user_qpv_code
        description: '{{ doc("column__user_qpv_code") }}'
        data_type: STRING

      - name: user_qpv_name
        description: '{{ doc("column__user_qpv_name") }}'
        data_type: STRING
